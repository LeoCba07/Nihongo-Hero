<!-- app/views/story_levels/map.html.erb -->
<div class="container mt-3">
  <div class="row justify-content-center">
    <div class="col-md-5">
      <div class="card shadow">
        <div class="card-body text-center">
          <h1 class="card-title mb-3">Your Journey</h1>
          <div class="d-flex flex-column gap-3">
            <!-- Reversed for bottom to top display? Might adjust -->
            <% @story_levels.reverse_each do |level| %>
              <%
                is_completed = @completed_level_ids.include?(level.id)
                is_current = level == @current_level
                is_locked = !@accessible_level_ids.include?(level.id)
              %>
              <div class="p-1 border rounded <%= 'bg-success text-white' if is_completed %> <%= 'bg-danger text-white' if is_current %> <%= 'bg-secondary text-white' if is_locked %>">
                <% if is_completed %>
                  <p class="mb-0">âœ“ Level <%= level.id %> - Completed</p>
                <% elsif is_current %>
                  <%= link_to fights_path(story_level_id: level.id), method: :post, class: "btn btn-light btn-lg w-100" do %>
                    <strong>â–¶ Start Level <%= level.id %></strong>
                  <% end %>
                <% else %>
                  <p class="mb-0">ðŸ”’ Level <%= level.id %> - Locked</p>
                <% end %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
